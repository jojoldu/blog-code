# 잦은 업데이트가 필요한 테이블 설계시 주의 (PostgreSQL)

강의 정보 중 count 정보가 실시간으로 업데이트 된다.

이미 강의 테이블 자체가 강의상세정보로 엄청나게 큰 텍스트들의 덩어리로 되어있다보니 
빠른속도로 FSM 정보가 차 autovaccum이 빈번하게 발생하고, 
이로인해 모든 강의 관련된 쿼리들이 지연이 발생한다

![log](./images/log.png)

이런 문제를 해결하기 위해서는 
count와 같이 실시간으로 정보가 업데이트되는 정보는 **최대한 별도 분리** 하거나 MVCC 방식을 사용하지 않는 다른 저장소 (MySQL 혹은 NoSQL) 에서 별도 보관하는것이 좋다